HACKTHEBOX-- DANCING

Server Message BLOCK (SMB)
this is a communication protocol that provides shared access to files, printers, and serial ports between edpoints on a network.
mostly runs on windows machines
mostly runs on 445
transport layer protocol mostly used is NETBIOS over tcp/ip
runs at the application/presentation layer of the osi model


In order to successfully enumerate share content on the remote system, we can use a script called
smbclient . If the script is not present on your Virtual Machine, you can install it by typing the following
command in your terminal (for Debian based operating systems):
sudo apt-get install smbclient

Smbclient will attempt to connect to the remote host and check if there is any authentication required. If there is, it will ask you for a password for your local username. We should take note of this. If we do not specify a specific username to smbclient when attempting to connect to the remote host, it will just use your local machine's username. That is the one you are currently logged into your Virtual Machine with. This is because SMB authentication always requires a username, so by not giving it one explicitly to try to login with, it will just have to pass your current local username to avoid throwing an error with the protocol.

Nevertheless, let us use our local username since we do not know about any remote usernames present on the target host that we could potentially log in with. Next up, after that, we will be prompted for a password.
This password is related to the username you input before. Hypothetically, if we were a legitimate remote user trying to log in to their resource, we would know our username and password and log in normally to access our share. In this case, we do not have such credentials, so what we will be trying to perform is any of
the following:
Guest authentication
Anonymous authentication
Any of these will result in us logging in without knowing a proper username/password combination and seeing the files stored on the share. Let us proceed to try that. We leave the password field blank, simply
hitting Enter to tell the script to move along with, it will just have to pass your current local username to avoid throwing an error with the protocol.


smbclient --help
sbmclient -L target IP
smbclient \\\\target-ip\\sharename

ls - list share
cd - open share
get - download file